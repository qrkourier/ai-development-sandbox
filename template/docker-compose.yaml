services:
  dev-sandbox:
    image: ai-dev-sandbox:latest
    volumes:
      # Workspace: this project
      - ${SANDBOX_WORKSPACE:-.}:/workspace/project:rw

      # Auth credentials (read-only)
      - ~/.claude/.credentials.json:/home/dev/.claude-credentials/.credentials.json:ro
      - ~/.local/share/opencode/auth.json:/home/dev/.local/share/opencode/auth.json:ro

      # Git identity (read-only)
      - ~/.gitconfig:/home/dev/.gitconfig:ro
      - ~/.ssh:/home/dev/.ssh:ro

      # Additional context directories (uncomment/add as needed)
      # - ~/shared-libs:/workspace/context/shared-libs:ro

    environment:
      - CLAUDE_CONFIG_DIR=/home/dev/.claude
      - ANTHROPIC_API_KEY
      - OPENAI_API_KEY
      - GOOGLE_API_KEY

    working_dir: /workspace/project
    stdin_open: true
    tty: true
    ports:
      - "3000:3000"
